# Инструкция по установке и запуску Telegram-бота для напоминаний

Этот файл содержит подробные инструкции по установке и запуску Telegram-бота для управления напоминаниями. Инструкции доступны как для Windows, так и для Linux.

## СОДЕРЖАНИЕ:
1. [Установка и запуск на Windows](#windows)
2. [Установка и запуск на Linux](#linux)
3. [Общие инструкции](#общие-инструкции)
4. [Возможные проблемы](#возможные-проблемы)

---

<a name="windows"></a>
## УСТАНОВКА И ЗАПУСК НА WINDOWS

### Шаг 1: Установка Python 3.11

⚠️ **ВАЖНО**: Не рекомендуется устанавливать Python 3.13 или выше, так как с ними могут возникнуть проблемы при установке зависимостей бота.

1. Скачайте Python 3.11:
   - Перейдите на сайт https://www.python.org/downloads/
   - Найдите и нажмите на ссылку "Python 3.11.x" (например, Python 3.11.7)
   - Нажмите на кнопку "Download"

2. Установите Python:
   - Запустите скачанный файл (например, python-3.11.7-amd64.exe)
   - **ОБЯЗАТЕЛЬНО** установите галочку "Add Python 3.11 to PATH" внизу окна установщика
   - Нажмите "Install Now" и дождитесь завершения установки

3. Проверьте установку:
   - Нажмите Win+R, введите "cmd" и нажмите Enter для открытия командной строки
   - Введите: `python --version`
   - Вы должны увидеть что-то вроде "Python 3.11.7"

### Шаг 2: Подготовка папки и файлов бота

1. Создайте папку для бота:
   - Откройте командную строку (Win+R, введите "cmd", нажмите Enter)
   - Введите команды:
   ```
   mkdir C:\TelegramBot
   cd C:\TelegramBot
   ```

2. Создайте файл бота:
   - В командной строке введите:
   ```
   notepad reminder_bot.py
   ```
   - Скопируйте и вставьте код бота в открывшийся Блокнот
   - Сохраните файл (Ctrl+S)

### Шаг 3: Установка необходимых библиотек

1. Установите библиотеку aiogram:
   - В командной строке (убедитесь, что вы находитесь в папке C:\TelegramBot) введите:
   ```
   pip install aiogram==2.25.1
   ```
   - Дождитесь завершения установки

### Шаг 4: Настройка и запуск бота

1. Получите токен для бота:
   - Откройте Telegram и найдите @BotFather
   - Отправьте команду `/newbot`
   - Следуйте инструкциям: укажите имя бота и его username
   - Сохраните токен, который вам пришлет BotFather

2. Настройте бота:
   - Откройте файл reminder_bot.py (команда `notepad reminder_bot.py`)
   - Найдите строку `TOKEN = "YOUR_BOT_TOKEN"`
   - Замените YOUR_BOT_TOKEN на ваш токен от BotFather (сохраняя кавычки)
   - Сохраните файл (Ctrl+S)

3. Запустите бота:
   - В командной строке введите:
   ```
   python reminder_bot.py
   ```
   - Если всё правильно, вы увидите сообщения о запуске бота

4. Создайте файл для удобного запуска бота в будущем:
   - Откройте Блокнот и введите:
   ```
   @echo off
   cd /d C:\TelegramBot
   python reminder_bot.py
   pause
   ```
   - Сохраните как "start_bot.bat" в папке C:\TelegramBot
   - Теперь для запуска бота достаточно дважды кликнуть на этот файл

---

<a name="linux"></a>
## УСТАНОВКА И ЗАПУСК НА LINUX

### Шаг 1: Установка Python 3.11

⚠️ **ВАЖНО**: Рекомендуется использовать Python 3.11, а не более новые версии, для избежания проблем с зависимостями.

1. Обновите список пакетов и установите необходимые инструменты:
   ```
   sudo apt update
   sudo apt install software-properties-common -y
   ```

2. Добавьте репозиторий с Python 3.11:
   ```
   sudo add-apt-repository ppa:deadsnakes/ppa -y
   sudo apt update
   ```

3. Установите Python 3.11 и pip:
   ```
   sudo apt install python3.11 python3.11-venv python3-pip -y
   ```

4. Проверьте установку:
   ```
   python3.11 --version
   ```
   Вы должны увидеть "Python 3.11.x"

### Шаг 2: Подготовка папки и файлов бота

1. Создайте папку для бота:
   ```
   mkdir ~/telegram-bot
   cd ~/telegram-bot
   ```

2. Создайте файл бота:
   ```
   nano reminder_bot.py
   ```
   - Скопируйте и вставьте код бота в открывшийся редактор
   - Нажмите Ctrl+O для сохранения, затем Enter, затем Ctrl+X для выхода

### Шаг 3: Создание виртуального окружения и установка зависимостей

1. Создайте виртуальное окружение:
   ```
   python3.11 -m venv venv
   ```

2. Активируйте виртуальное окружение:
   ```
   source venv/bin/activate
   ```
   После активации в начале строки терминала должно появиться (venv)

3. Установите библиотеку aiogram:
   ```
   pip install aiogram==2.25.1
   ```

### Шаг 4: Настройка и запуск бота

1. Получите токен для бота:
   - Откройте Telegram и найдите @BotFather
   - Отправьте команду `/newbot`
   - Следуйте инструкциям: укажите имя бота и его username
   - Сохраните токен, который вам пришлет BotFather

2. Настройте бота:
   ```
   nano reminder_bot.py
   ```
   - Найдите строку `TOKEN = "YOUR_BOT_TOKEN"`
   - Замените YOUR_BOT_TOKEN на ваш токен от BotFather (сохраняя кавычки)
   - Сохраните файл (Ctrl+O, Enter, Ctrl+X)

3. Запустите бота:
   ```
   python reminder_bot.py
   ```

4. Создайте скрипт для удобного запуска:
   ```
   nano start_bot.sh
   ```
   Введите:
   ```
   #!/bin/bash
   cd ~/telegram-bot
   source venv/bin/activate
   python reminder_bot.py
   ```
   Сохраните (Ctrl+O, Enter, Ctrl+X) и сделайте скрипт исполняемым:
   ```
   chmod +x start_bot.sh
   ```

5. Для запуска бота в будущем используйте:
   ```
   ./start_bot.sh
   ```

### Шаг 5 (дополнительно): Настройка автозапуска на Linux

1. Создайте файл службы systemd:
   ```
   sudo nano /etc/systemd/system/telegram-bot.service
   ```

2. Введите следующее содержимое (замените "ваше_имя_пользователя" на ваше имя пользователя Linux):
   ```
   [Unit]
   Description=Telegram Reminder Bot
   After=network.target

   [Service]
   User=ваше_имя_пользователя
   WorkingDirectory=/home/ваше_имя_пользователя/telegram-bot
   ExecStart=/home/ваше_имя_пользователя/telegram-bot/venv/bin/python /home/ваше_имя_пользователя/telegram-bot/reminder_bot.py
   Restart=always

   [Install]
   WantedBy=multi-user.target
   ```

3. Сохраните файл (Ctrl+O, Enter, Ctrl+X)

4. Включите и запустите службу:
   ```
   sudo systemctl enable telegram-bot
   sudo systemctl start telegram-bot
   ```

5. Проверьте статус службы:
   ```
   sudo systemctl status telegram-bot
   ```

---

<a name="общие-инструкции"></a>
## ОБЩИЕ ИНСТРУКЦИИ ПО ИСПОЛЬЗОВАНИЮ БОТА

1. Найдите своего бота в Telegram по username, который вы указали при создании

2. Отправьте команду `/start` для начала работы

3. Создание напоминаний:
   - Отправьте сообщение в формате: "Напомни через X часов/минут: текст напоминания"
   - Например: "Напомни через 1 час: позвонить маме"
   - Или: "Купить молоко через 30 минут"

4. Проверка существующих напоминаний:
   - Отправьте команду `/list`

---

<a name="возможные-проблемы"></a>
## ВОЗМОЖНЫЕ ПРОБЛЕМЫ И ИХ РЕШЕНИЯ

### Проблемы с установкой библиотек на Windows

1. **Ошибки прав доступа**:
   - Запустите командную строку от имени администратора: кликните правой кнопкой на меню Пуск > Командная строка (администратор)
   - Повторите команду установки: `pip install aiogram==2.25.1`

2. **Проблемы с кодировкой в командной строке**:
   - Введите команду: `chcp 1251` или `chcp 65001`
   - Или используйте PowerShell вместо командной строки

3. **Ошибки при установке зависимостей с Rust**:
   - Это одна из причин, почему мы рекомендуем aiogram 2.25.1 вместо 3.x
   - Если вам всё же нужна версия 3.x, сначала установите Rust с официального сайта https://www.rust-lang.org/tools/install

### Проблемы с запуском на Linux

1. **Нет прав на выполнение скрипта**:
   ```
   chmod +x start_bot.sh
   ```

2. **Проблемы с зависимостями**:
   ```
   pip install --upgrade pip
   pip install aiogram==2.25.1
   ```

3. **Проблемы с виртуальным окружением**:
   ```
   deactivate
   rm -rf venv
   python3.11 -m venv venv
   source venv/bin/activate
   pip install aiogram==2.25.1
   ```

### Бот не отвечает

1. Убедитесь, что бот запущен и в консоли нет сообщений об ошибках
2. Проверьте, правильно ли вы ввели токен в файле reminder_bot.py
3. Проверьте подключение к интернету

### Напоминания не приходят

1. Убедитесь, что бот запущен и работает
2. Проверьте, что время на компьютере установлено правильно
3. Проверьте список напоминаний командой `/list`

---

Если у вас возникли другие проблемы, попробуйте перезапустить бота или свяжитесь с разработчиком.